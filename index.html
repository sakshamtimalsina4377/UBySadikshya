<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GiftBox – Customize Your Box</title>

  <style>
    :root { --border:#e6e6e6; --bg:#fafafa; }
    body { font-family: system-ui, Arial, sans-serif; margin: 0; background: var(--bg); color:#111; }
    header { padding: 20px; background:#fff; border-bottom:1px solid var(--border); }

    /* Header layout with logo */
    .header-wrap { display:flex; align-items:center; gap:14px; }
    .logo { height:60px; width:auto; border-radius:10px; object-fit:contain; }
    header h1 { margin:0 0 6px; font-size: 20px; }
    header p { margin:0; color:#555; font-size: 14px; }

    main {
      max-width: 900px;
      margin: 18px auto;
      padding: 0 14px 30px;
      display:grid;
      gap:14px;
      grid-template-columns: 1.2fr .8fr;
    }
    @media (max-width: 860px){ main{ grid-template-columns: 1fr; } }

    .card { background:#fff; border:1px solid var(--border); border-radius: 12px; padding: 14px; }
    .card h2 { margin:0 0 10px; font-size: 16px; }

    .row { display:flex; gap:10px; flex-wrap: wrap; }
    .field { display:flex; flex-direction:column; gap:6px; flex: 1; min-width: 180px; }

    label { font-size: 12px; color:#444; }
    input[type="text"], input[type="tel"], select, textarea {
      border:1px solid var(--border); border-radius: 10px; padding: 10px; font-size: 14px; background:#fff;
    }
    textarea { min-height: 90px; resize: vertical; }

    .items { display:grid; gap:10px; grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 520px){ .items{ grid-template-columns: 1fr; } }

    .item { border:1px solid var(--border); border-radius: 12px; padding: 10px; }
    .item-top { display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .item-name { font-size: 14px; font-weight: 600; }
    .sub { font-size: 12px; color:#666; margin-top:4px; }

    .qty { width: 70px; }

    .item-controls { display:flex; gap:8px; align-items:center; margin-top:10px; flex-wrap: wrap; }

    /* FIXED: pills now show text clearly */
    .pill {
      font-size: 12px;
      border:1px solid #ccc;
      border-radius: 999px;
      padding: 6px 12px;
      background:#fff;
      cursor:pointer;
      color:#111;
      font-weight:500;
      line-height: 1;
    }
    .pill[aria-pressed="true"]{
      background:#111;
      color:#fff;
      border-color:#111;
    }

    .summary { font-size: 13px; color:#222; line-height:1.45; white-space: pre-wrap; }

    .actions { display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    button, a.btn {
      border:1px solid #111; background:#111; color:#fff; padding:10px 12px; border-radius: 10px;
      font-size: 14px; cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:8px;
    }
    button.secondary, a.btn.secondary { background:#fff; color:#111; }

    .hint { font-size: 12px; color:#666; margin-top:6px; }

    footer { max-width: 900px; margin: 0 auto; padding: 0 14px 18px; color:#777; font-size:12px; }
  </style>
</head>

<body>
<header>
  <div class="header-wrap">
    <!-- Logo uses logo.jpg -->
    <img src="logo.jpg" alt="Store Logo" class="logo" onerror="this.style.display='none';" />
    <div>
      <h1>Upahar by Sadikshya</h1>
      <p>Customize your gift box in a minute. Choose a box size and items, then send your order.</p>
    </div>
  </div>
</header>

<main>
  <section class="card" id="builder">
    <h2>1) Choose your box and items</h2>

    <div class="row">
      <div class="field">
        <label for="boxSize">Box size</label>
        <select id="boxSize">
          <option value="Small Box">Box – Small</option>
          <option value="Premium Box">Box – Premium</option>
        </select>
      </div>

      <div class="field">
        <label for="customerName">Your name</label>
        <input id="customerName" type="text"/>
      </div>

      <div class="field">
        <label for="phone">Phone </label>
        <input id="phone" type="tel"/>
      </div>
    </div>

    <div class="field" style="margin-top:10px;">
      <label>Items (choose quantity and variants)</label>
      <div class="items" id="items"></div>
      <div class="hint"></div>
    </div>

    <div class="field" style="margin-top:10px;">
      <label for="notes">Notes (optional)</label>
      <textarea id="notes"></textarea>
    </div>
  </section>

  <aside class="card">
    <h2>2) Order summary</h2>
    <div class="summary" id="summary"></div>

    <div class="actions">
      <button class="secondary" id="copyBtn" type="button">Copy order text</button>
      <a class="btn" id="whatsBtn" href="#" target="_blank" rel="noopener">Send on WhatsApp</a>
      <a class="btn secondary" id="emailBtn" href="#">Send via Email</a>
    </div>
</main>

<script>
  // ====== EDIT THESE TWO LINES ======
  const STORE_WHATSAPP_NUMBER = "9779864697401"; // digits only, include country code (e.g., 234..., 1..., 44...)
  const STORE_EMAIL = "sadikshatimalsina43@gmail.com";
  // ================================

  const catalog = [
    { id:"light", name:"Light", variants:["Small","Big"], qty:true },
    { id:"polaroid", name:"Photo Polaroid", variants:["Yes"], qty:true },
    { id:"bracelet", name:"Jewellery – Bracelet", variants:["Silver","Gold"], qty:true },
    { id:"earring", name:"Jewellery – Earring", variants:["Small","Chunky"], qty:true },
    { id:"lip", name:"Lip gloss / Lip tint", variants:["Lip gloss","Lip tint"], qty:true },
    { id:"doll", name:"Doll", variants:["Yes"], qty:true },
    { id:"scrunchies", name:"Scrunchies", variants:["Yes"], qty:true },
    { id:"clip", name:"Clip", variants:["Yes"], qty:true },
    { id:"chocolates", name:"Chocolates", variants:["Yes"], qty:true },
    { id:"cups", name:"Cups", variants:["Yes"], qty:true },
  ];

  const state = {
    boxSize: "Small Box",
    customerName: "",
    phone: "",
    notes: "",
    selections: {} // {id: {variant, qty}}
  };

  const elItems = document.getElementById("items");
  const elSummary = document.getElementById("summary");

  function renderItems(){
    elItems.innerHTML = "";
    catalog.forEach(item => {
      const card = document.createElement("div");
      card.className = "item";

      const top = document.createElement("div");
      top.className = "item-top";

      const name = document.createElement("div");
      name.innerHTML = `<div class="item-name">${item.name}</div>
                        <div class="sub">${item.variants.length > 1 ? "Choose a variant" : "Add to your box"}</div>`;

      const qty = document.createElement("input");
      qty.type = "number";
      qty.min = "0";
      qty.value = "0";
      qty.className = "qty";
      qty.title = "Quantity";
      qty.addEventListener("input", () => {
        const q = Math.max(0, parseInt(qty.value || "0", 10));
        qty.value = q;
        ensureSelection(item.id);
        state.selections[item.id].qty = q;
        updateSummary();
      });

      top.appendChild(name);
      top.appendChild(qty);

      const controls = document.createElement("div");
      controls.className = "item-controls";

      item.variants.forEach((v) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "pill";
        btn.textContent = v; // text is visible now
        btn.setAttribute("aria-pressed", "false");
        btn.addEventListener("click", () => {
          ensureSelection(item.id);
          state.selections[item.id].variant = v;

          Array.from(controls.querySelectorAll("button"))
            .forEach(b => b.setAttribute("aria-pressed","false"));
          btn.setAttribute("aria-pressed","true");

          // if qty is 0, auto set to 1 when they pick a variant
          if ((state.selections[item.id].qty || 0) === 0) {
            state.selections[item.id].qty = 1;
            qty.value = 1;
          }
          updateSummary();
        });

        controls.appendChild(btn);
      });

      card.appendChild(top);
      card.appendChild(controls);
      elItems.appendChild(card);
    });
  }

  function ensureSelection(id){
    if (!state.selections[id]) state.selections[id] = { variant: "", qty: 0 };
  }

  function buildOrderText(){
    const lines = [];
    const name = state.customerName?.trim();
    const phone = state.phone?.trim();

    lines.push("GIFTBOX ORDER");
    lines.push("--------------------");
    if (name) lines.push(`Name: ${name}`);
    if (phone) lines.push(`Phone: ${phone}`);
    lines.push(`Box: ${state.boxSize}`);
    lines.push("");
    lines.push("Items:");

    const chosen = [];
    catalog.forEach(item => {
      const sel = state.selections[item.id];
      if (!sel || !sel.qty) return;
      const variantText = sel.variant ? ` (${sel.variant})` : "";
      chosen.push(`- ${item.name}${variantText} x ${sel.qty}`);
    });

    if (chosen.length === 0) lines.push("- (no items selected yet)");
    else lines.push(...chosen);

    const notes = state.notes?.trim();
    if (notes) {
      lines.push("");
      lines.push("Notes:");
      lines.push(notes);
    }

    return lines.join("\n");
  }

  function updateSummary(){
    const text = buildOrderText();
    elSummary.textContent = text;

    // WhatsApp deep link
    const waText = encodeURIComponent(text);
    const waLink = `https://wa.me/${STORE_WHATSAPP_NUMBER}?text=${waText}`;
    document.getElementById("whatsBtn").href = waLink;

    // Email link
    const subject = encodeURIComponent("GiftBox Order");
    const body = encodeURIComponent(text);
    document.getElementById("emailBtn").href = `mailto:${STORE_EMAIL}?subject=${subject}&body=${body}`;
  }

  // inputs
  document.getElementById("boxSize").addEventListener("change", (e)=>{ state.boxSize = e.target.value; updateSummary(); });
  document.getElementById("customerName").addEventListener("input", (e)=>{ state.customerName = e.target.value; updateSummary(); });
  document.getElementById("phone").addEventListener("input", (e)=>{ state.phone = e.target.value; updateSummary(); });
  document.getElementById("notes").addEventListener("input", (e)=>{ state.notes = e.target.value; updateSummary(); });

  // copy
  document.getElementById("copyBtn").addEventListener("click", async () => {
    const text = buildOrderText();
    try {
      await navigator.clipboard.writeText(text);
      alert("Order copied!");
    } catch {
      alert("Could not copy automatically. Select the text and copy manually.");
    }
  });

  // init
  renderItems();
  updateSummary();
</script>
</body>
</html>
